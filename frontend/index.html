<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyBuilding — Объекты</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="budget.css">
    <link rel="stylesheet" href="expense.css">
    <link rel="stylesheet" href="analysis.css">
</head>

<body>
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <img id="sidebar-logo" src="assets/design_key.png" alt="logo" style="display:none;" />
            <span>Мои объекты</span>
            <button id="add-object">+</button>
        </div>
        <ul id="object-list" class="object-list"></ul>
    </div>
    <div class="main-content">
        <div id="tabs-actions-row"
            style="display:none; align-items: center; justify-content: space-between; gap: 10px;">
            <button id="sidebar-toggle" class="sidebar-toggle">☰</button>
            <div id="tabs" style="margin-top:30px;">
                <div class="tabs-header">
                    <button class="tab-btn" data-tab="analysis">Анализ</button>
                    <button class="tab-btn" data-tab="income">Приход</button>
                    <button class="tab-btn" data-tab="budget">Бюджет</button>
                    <button class="tab-btn" data-tab="expense">Расход</button>
                </div>
            </div>
            <div id="object-actions" style="gap: 10px;">
                <input id="rename-input" type="text" style="display:none;">
                <button id="rename-btn">Переименовать</button>
                <button id="delete-btn">Удалить</button>
            </div>
        </div>
        <div id="tab-analysis" class="tab-content" style="display:none;">
            <div class="tab-actions">
                <button class="icon-btn" id="download-analysis" title="Скачать">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="#0057d8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-file-down-icon lucide-file-down">
                        <path
                            d="M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z" />
                        <path d="M14 2v5a1 1 0 0 0 1 1h5" />
                        <path d="M12 18v-6" />
                        <path d="m9 15 3 3 3-3" />
                    </svg>
                </button>
            </div>
            <div id="analysis-container"></div>
        </div>
        <div id="tab-income" class="tab-content" style="display:none;">
            <div class="tab-actions">
                <button class="icon-btn" id="add-income" title="Добавить">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <circle cx="10" cy="10" r="9" stroke="#0057d8" stroke-width="2" />
                        <path d="M10 6v8M6 10h8" stroke="#0057d8" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </button>
                <button class="icon-btn" id="download-income" title="Скачать">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="#0057d8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-file-down-icon lucide-file-down">
                        <path
                            d="M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z" />
                        <path d="M14 2v5a1 1 0 0 0 1 1h5" />
                        <path d="M12 18v-6" />
                        <path d="m9 15 3 3 3-3" />
                    </svg>
                </button>
            </div>
            <div class="income-table-wrap">
                <table class="income-table">
                    <thead>
                        <tr>
                            <th>№</th>
                            <th>Дата</th>
                            <th>Фото</th>
                            <th>Сумма (в сумах)</th>
                            <th>Кто передал</th>
                            <th>Кто получил</th>
                            <th>Комментарии</th>
                            <th style="width:70px;"></th>
                        </tr>
                    </thead>
                    <tbody id="income-tbody">
                        <!-- Строки будут добавляться динамически -->
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="3" style="text-align:right;font-weight:600;">Итого:</td>
                            <td id="income-total" style="font-weight:600;">0</td>
                            <td colspan="3"></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>

        <!-- Модальное окно для добавления прихода -->
        <div id="income-modal" class="modal" style="display:none;">
            <div class="modal-content">
                <span class="modal-close" id="income-modal-close">&times;</span>
                <h3>Добавить приход</h3>
                <form id="income-form">
                    <label>Дата:<br><input type="date" id="income-date" required></label><br>
                    <label>Фото:<br><input type="file" id="income-photo" accept="image/*"></label><br>
                    <label>Сумма (в сумах):<br><input type="text" id="income-amount" required
                            placeholder="0"></label><br>
                    <label>Кто передал:<br><input type="text" id="income-from" required></label><br>
                    <label>Кто получил:<br><input type="text" id="income-to" required></label><br>
                    <label>Комментарии:<br><textarea id="income-comment"></textarea></label><br>
                    <button type="submit" class="icon-btn" style="background:#0057d8;color:#fff;">Сохранить</button>
                </form>
                <input type="hidden" id="income-edit-index">
            </div>
        </div>

        <div id="tab-budget" class="tab-content" style="display:none;">
            <div class="tab-actions">
                <button class="icon-btn" id="add-budget-group" title="Добавить этап">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="#0057d8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-folder-down-icon lucide-folder-down">
                        <path
                            d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z" />
                        <path d="M12 10v6" />
                        <path d="m15 13-3 3-3-3" />
                    </svg>
                </button>
                <button class="icon-btn" id="download-budget" title="Скачать">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="#0057d8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-file-down-icon lucide-file-down">
                        <path
                            d="M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z" />
                        <path d="M14 2v5a1 1 0 0 0 1 1h5" />
                        <path d="M12 18v-6" />
                        <path d="m9 15 3 3 3-3" />
                    </svg>
                </button>
            </div>
            <div id="budget-container"></div>
        </div>

        <div id="tab-expense" class="tab-content" style="display:none;">
            <div class="tab-actions">
                <button class="icon-btn" id="download-expense" title="Скачать">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="#0057d8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="lucide lucide-file-down-icon lucide-file-down">
                        <path
                            d="M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z" />
                        <path d="M14 2v5a1 1 0 0 0 1 1h5" />
                        <path d="M12 18v-6" />
                        <path d="m9 15 3 3 3-3" />
                    </svg>
                </button>
            </div>
            <div id="expense-container"></div>
        </div>
    </div>
    <button id="sidebar-close" class="sidebar-close" style="display:none;">✕</button>

    <!-- Модалка для просмотра фото -->
    <div id="photo-modal" class="modal" style="display:none;">
        <div class="modal-content"
            style="max-width:90vw;max-height:90vh;display:flex;flex-direction:column;align-items:center;">
            <span class="modal-close" id="photo-modal-close">&times;</span>
            <img id="photo-modal-img" src=""
                style="max-width:80vw;max-height:70vh;border-radius:10px;box-shadow:0 2px 16px #0002;" alt="Фото">
        </div>
    </div>

    <script src="app.js"></script>
    <script src="budget.js"></script>
    <script src="expense.js"></script>
    <script src="analysis.js"></script>
</body>

</html>